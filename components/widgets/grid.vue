<template>
    <div class="columns" data-scroll-container="">
      <div class="column column-reverse" style="filter:url(#pixelateOnScroll);">
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">ANTIHEROES COLLECTIVE</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-antiheroes.gif" alt="" title="" height="" width="" />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">LA COUR DES MIRACLES</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-lacdm.gif" alt="" title="" height="" width="" />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">ALCHIMIE DU JEU</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-alchimie.jpg" alt="" title="" height="" width="" />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption group"> 
              <h4 class="title">ARTCORE TATTOOS</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-artcoretattoo.jpg" alt="" title="" height="" width="" class=""/>
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">SAAAD - FILM</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-saaad.gif" alt="" title="" height="" width="" />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">EXPLORER</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-explorer.jpg" alt="" title="" height="" width="" />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">ESL</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-esl.jpg" alt="" title="" height="" width="" />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">ELECTRO ALTERNATIV</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-ea1.jpg" alt="" title="" height="" width="" />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
      </div>
      <div class="column">
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">ELECTRO ALTERNATIV</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow" style="filter:url(#pixelateOnScroll);">
                    <img src="img/projects/article-ea3.jpg" alt="" title="" height="" width=""  />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">ISO</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow" style="filter:url(#pixelateOnScroll);">
                    <img src="img/projects/article-iso.jpg" alt="" title="" height="" width=""/>
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">FINESTRA</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow" style="filter:url(#pixelateOnScroll);">
                    <img src="img/projects/article-finestra.jpg" alt="" title="" height="" width=""/>
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption group"> 
              <h4 class="title">GREENFUZ</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow" style="filter:url(#pixelateOnScroll);">
                    <img src="img/projects/article-greenfuz.jpg" alt="" title="" height="" width="" />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">CHATEAU LES MOINES</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-chateaulesmoines.jpg" alt="" title="" height="" width=""  style="filter:url(#pixelateOnScroll);"/>
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">1+2</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-1plus2.jpg" alt="" title="" height="" width=""  style="filter:url(#pixelateOnScroll);"/>
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">ELECTRO ALTERNATIV</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-ea2.jpg" alt="" title="" height="" width=""  style="filter:url(#pixelateOnScroll);"/>
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">IMAGE SINGULIERES</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-is.jpg" alt="" title="" height="" width=""  style="filter:url(#pixelateOnScroll);"/>
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
      </div>
      <div class="column column-reverse" style="filter:url(#pixelateOnScroll);">
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">MAR</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-mar.jpg" alt="" title="" height="" width="" />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">BAPTISTE HERBIN</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-herbin.jpg" alt="" title="" height="" width="" />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">SMAPI</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-smapi.jpg" alt="" title="" height="" width="" />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption group"> 
              <h4 class="title">MURIEL LHERMET</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-muriel.jpg" alt="" title="" height="" width="" class=""/>
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">DOMAINE DE PAPOLLE</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-papolle.jpg" alt="" title="" height="" width="" />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">NOMAD'S RETREAT</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-nomads.gif" alt="" title="" height="" width="" />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">ELECTROBOTIK INVASION</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-electrobotik.jpg" alt="" title="" height="" width="" />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
        <figure class="column__item group">
            <figcaption class="column__item-caption"> 
              <h4 class="title">ENEO</h4>

                <div class="column__item-imgwrap group-hover:bg-yellow">
                    <img src="img/projects/article-eneo.jpg" alt="" title="" height="" width="" />
                </div>
              <span>view more</span> 
            </figcaption>
        </figure>
      </div>
    </div>
</template>
<style lang="postcss">
  .columns { @apply grid w-full max-w-full mx-auto relative grid-cols-3 gap-[50px];}
  .column { @apply flex  flex-col p-0;}
  .column__item { @apply mx-auto w-[350px];}
  .column__item h4{ @apply font-aliseo text-black text-2xl -mt-11 text-left;}
  .column__item span{ @apply font-aktura text-xl; }
  .column:first-child .column__item-caption h4{ @apply text-right;}
  .column .column__item-caption h4{ @apply text-center;}
  .column:last-child .column__item-caption h4{ @apply text-left;}
  .column:first-child .column__item-caption span{ @apply text-right;}
  .column .column__item-caption span{ @apply text-center;}
  .column:last-child .column__item-caption span{ @apply text-left;}
  .column__item-imgwrap { @apply bg-black transition-colors duration-500;}
  .column__item-imgwrap img { 
    @apply w-full h-auto object-cover;
    aspect-ratio: 1;
    &:hover{ @apply mix-blend-luminosity saturate-0;}
  }
  /* Set up Animation */
  @media (prefers-reduced-motion) {
    @supports (animation-timeline: works) {
      /* Do fancy stuff */
      @keyframes adjust-position {
        /* Start position: shift entire column up, but not so that it goes out of view */
        from { transform: translateY(calc(-100% + 100vh)); }
        /* End position: shift entire column down, but not so that it goes out of view */
        to { transform: translateY(calc(100% - 100vh)); }
      }
      /* Set up scroll-timeline */
      @scroll-timeline scroll-in-document {
        source: auto; /* Default scroll-timeline: scrolling in the document */
      }
    }
  }
  .column-reverse {
      /* Flip item order in reverse columns */
      flex-direction: column-reverse;
  }

</style>
<script>
export default {
    head () {
      return {
        script: [
          {
            hid: 'scrollTimeline',
            src: 'https://flackr.github.io/scroll-timeline/dist/scroll-timeline.js',
            defer: true,
            // Changed after script load
            callback: () => { this.isPolyScrollTimelineLoaded = true } 
          }
        ]
      }
    },
  methods: {
    animateOnScroll() {
        if ( !CSS.supports("animation-timeline: foo") && !window.matchMedia('(prefers-reduced-motion: reduce)').matches  && (this.isPolyScrollTimelineLoaded = true)) {
          console.log("Animation timeline foo")
          
    // Set up timeline
    const timeline = new ScrollTimeline({
        scrollSource: document.documentElement,
        timeRange: 1,
        fill: "both"
    });

    // Loop all eligible columns
    document.querySelectorAll(".column-reverse").forEach(($column) => {
        // Flip item order in reverse columns
        $column.style.flexDirection = "column-reverse";

        // Hook Animation
        $column.animate(
            {
                transform: [
                    "translateY(calc(-100% + 100vh))",
                    "translateY(calc(100% - 100vh))"
                ]
            },
            {
                duration: 1,
                fill: "both",
                timeline
            }
        );
    });
        } else {
          console.log("Animation timeline ELSE")
        }
        
    },
  },
  mounted() {
    this.animateOnScroll();
  }
}
</script>
